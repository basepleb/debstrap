aptup() { sudo apt-get update && sudo apt-get upgrade }
zshup() { zmanage update && git -C $HOME/.oh-my-zsh pull && git -C $HOME/.zim/modules/prompt/external-themes/powerlevel10k pull && zmanage build-cache }

mdir() { mkdir $1 && cd $1;}
rl() { readlink -f $1 }
hist() { history | tail -$1 }

# find
f() { find ./ -name \*$1\* 2&> /dev/null; }

# permissions
own() { sudo chown -R www-data:www-data $1; }
gown() { sudo chmod -R g+wrx $1; }

# networking
ufwdel() { sudo ufw delete $1 && sudo ufw status numbered }
ngxlnk() { sudo ln -s "/etc/nginx/sites-available/$1" "/etc/nginx/sites-enabled/$1"; } 

listtables() { sudo iptables -t nat -L -n -v && sudo iptables -L -v -n | more }
flushtables() { for i in $( sudo iptables -t nat --line-numbers -L | grep '^[0-9]' | awk '{ print $1 }' | tac ); do sudo iptables -t nat -D PREROUTING $i 2>/dev/null ; done && for i in $( sudo iptables -t nat --line-numbers -L | grep '^[0-9]' | awk '{ print $1 }' | tac ); do sudo iptables -t nat -D POSTROUTING $i 2>/dev/null; done && sudo iptables -F && sudo iptables -X }

snitches() { flushtables; sudo iptables-restore < /etc/network/iptables.mitm.rules; }
stitches() { flushtables; sudo iptables-restore < /etc/network/iptables.up.rules; }

netreset() { sudo systemctl daemon-reload && sudo service networking restart && sudo service dhcpcd restart && sudo service hostapd restart && sleep 5 && sudo service isc-dhcp-server restart }

ipinfo() { curl -s ipinfo.io | jq -r ".ip, .hostname, .city, .country, .org" | tr -s '\r\n' ' ' && echo '\r' && ipconfig getifaddr en1 }

